<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Examples · LTspice</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>LTspice</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../install/">Installation</a></li><li><a class="toctext" href="../quickstart/">Quickstart</a></li><li class="current"><a class="toctext" href>Examples</a><ul class="internal"></ul></li><li><a class="toctext" href="../public_api/">Public API</a></li><li><a class="toctext" href="../contents/">Contents</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Examples</a></li></ul><a class="edit-page" href="https://github.com/cstook/LTspice.jl/blob/master/docs/src/examples.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Examples</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Example-2-1" href="#Example-2-1">Example 2</a></h1><p><a href="https://github.com/cstook/LTspice.jl/blob/master/docs/src/example2.ipynb">jupyter version</a></p><p>In this example, the efficiency of a LTM6423 will be measured vs Vin and Iout.</p><p><img src="../img/example2.jpg" alt="example2"/></p><p>Import modules.  For the plot <code>Plots</code> and <code>GR</code> modules are used.</p><div><pre><code class="language-julia">using Printf
using LTspice, Plots
gr()</code></pre><pre><code class="language-none">Plots.GRBackend()</code></pre></div><p>Create an instance of <code>LTspiceSimulation</code>.</p><div><pre><code class="language-julia">example2 = LTspiceSimulation(&quot;example2.asc&quot;,tempdir=true)</code></pre><pre><code class="language-none">LTspiceSimulation:
circuit path = C:\Users\Chris\AppData\Local\Temp\jl_369F.tmp\example2.asc

Parameters
vin                       = 4.0
iout                      = 1.0
rset                      = 40200.0

Measurements
pin
pout</code></pre></div><p>Define the values of vin and iout to test.</p><div><pre><code class="language-julia">vin_list = 6.0:1.5:21.0
iout_list = 0.5:0.5:3.0</code></pre><pre><code class="language-none">0.5:0.5:3.0</code></pre></div><p>Loop over vin and iout measuring efficiency.  Vout is fixed at 3.3V.</p><div><pre><code class="language-julia">rfb(vout)= 0.6*60.4e3/(vout-0.6)
function compute_efficiency_array(vin_list, iout_list, vout)
    efficiency = Array{Float64}(undef,length(vin_list),length(iout_list))
    for vin_index in eachindex(vin_list)
        for iout_index in eachindex(iout_list)
            (pin,pout) = example2(vin_list[vin_index],iout_list[iout_index],rfb(vout))
            efficiency[vin_index,iout_index] = -pout/pin
        end
    end
    return efficiency
end
@time efficiency = compute_efficiency_array(vin_list, iout_list, 3.3)</code></pre><pre><code class="language-none">585.108349 seconds (89.68 k allocations: 5.066 MiB, 0.01% gc time)
11×6 Array{Float64,2}:
 0.93997   0.942162  0.937148  0.928762  0.915784  0.998534
 0.932192  0.935486  0.934458  0.927974  0.912898  1.01275
 0.917481  0.925687  0.923796  0.921593  0.912998  0.902242
 0.901312  0.913865  0.921614  0.916701  0.904002  0.991675
 0.884122  0.897102  0.906636  0.90924   0.90197   0.999621
 0.865521  0.889689  0.899422  0.898173  0.902033  0.980182
 0.854933  0.879132  0.893467  0.89146   0.896744  0.979985
 0.841366  0.859608  0.882987  0.890038  0.890873  0.978106
 0.815515  0.850685  0.874464  0.873804  0.88229   0.954303
 0.80754   0.837913  0.868353  0.867787  0.874737  0.960581
 0.786317  0.825359  0.853557  0.862335  0.872456  0.93956</code></pre></div><p>Plot the results.</p><div><pre><code class="language-julia">plt = plot()
for iout_index in eachindex(iout_list)
    plot!(plt,vin_list,efficiency[:,iout_index],label = &quot;Iout=&quot;*@sprintf(&quot;%2.2f&quot;,iout_list[iout_index]))
end
plot!(plt, title = &quot;LTM6423 Efficiency @ Vout = 3.3V&quot;)
plot!(plt, xlabel = &quot;Vin (V)&quot;, ylabel = &quot;Efficiency&quot;)</code></pre></div><p><img src="../example2.svg" alt/></p><footer><hr/><a class="previous" href="../quickstart/"><span class="direction">Previous</span><span class="title">Quickstart</span></a><a class="next" href="../public_api/"><span class="direction">Next</span><span class="title">Public API</span></a></footer></article></body></html>
